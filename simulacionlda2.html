<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulaci√≥n LDA - Acceso a la Informaci√≥n</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-900 p-6">
  <div class="w-full max-w-none px-4 md:px-12 mx-auto">
    <h1 class="text-3xl font-bold mb-6 text-center">üß† Simulaci√≥n de LDA sobre Solicitudes de Informaci√≥n P√∫blica</h1>

    <div class="bg-gray-50 border-l-4 border-black p-6 mb-8 shadow-sm">
      <p class="text-sm text-gray-700 italic mb-2">Ejemplos reales de solicitudes:</p>
      <ul class="list-disc pl-6 text-sm text-gray-800 space-y-1">
        <li>‚ÄúSolicito copia √≠ntegra del contrato adjudicado a la empresa Consultores Ambientales S.A. de C.V. para la ejecuci√≥n del proyecto de saneamiento de aguas en la regi√≥n del Istmo, celebrado en el a√±o 2022, incluyendo anexos t√©cnicos y presupuestales...‚Äù</li>
        <li>‚ÄúRequiero el desglose completo del monto total ejercido en campa√±as de comunicaci√≥n institucional en medios impresos, digitales y radiof√≥nicos durante el periodo de enero a diciembre de 2023, especificando proveedores y conceptos...‚Äù</li>
        <li>‚ÄúFavor de remitir en formato editable el padr√≥n de beneficiarios del programa Apoyo Alimentario correspondiente al segundo semestre del a√±o 2024, desglosado por localidad y con indicaci√≥n del tipo de apoyo recibido...‚Äù</li>
        <li>‚Äú¬øCu√°ntas denuncias formales por acoso laboral se han registrado ante la unidad de control interno durante los a√±os 2022 y 2023, especificando √°rea, tipo de falta y estatus del procedimiento disciplinario?...‚Äù</li>
        <li>‚ÄúSolicito la base de datos completa en formato abierto (CSV o Excel) de todas las sanciones administrativas impuestas entre 2020 y 2024, con campos que indiquen dependencia, tipo de falta, servidor p√∫blico implicado y resoluci√≥n...‚Äù</li>
      </ul>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8 items-end">
      <div>
        <label class="block text-sm font-semibold">Œ± (Alpha)</label>
        <input id="alpha" type="range" min="0.1" max="1.0" step="0.01" value="0.3" class="w-full accent-black">
        <div id="alphaVal" class="text-center mt-1 text-sm font-mono">0.30</div>
      </div>
      <div>
        <label class="block text-sm font-semibold">Œ≤ (Beta)</label>
        <input id="beta" type="range" min="0.01" max="0.5" step="0.01" value="0.1" class="w-full accent-black">
        <div id="betaVal" class="text-center mt-1 text-sm font-mono">0.10</div>
      </div>
      <div>
        <label class="block text-sm font-semibold">k (T√≥picos)</label>
        <input id="topics" type="range" min="2" max="10" step="1" value="4" class="w-full accent-black">
        <div id="topicsVal" class="text-center mt-1 text-sm font-mono">4</div>
      </div>
      <div>
        <label class="block text-sm font-semibold">üìà Progreso (Coherencia)</label>
        <div id="steps" class="flex gap-2 justify-center mt-3 flex-wrap text-xs text-gray-700"></div>
      </div>
    </div>

    <div class="text-center mb-8">
      <button onclick="runSimulation()" class="bg-black text-white font-bold px-6 py-2 rounded shadow hover:scale-105 transition duration-150">üîÑ Simular Modelo</button>
    </div>

    <div id="finalResult" class="hidden border-t pt-6 mt-6">
      <h3 id="coherenceTitle" class="text-xl font-semibold text-red-700 mb-4 text-center">‚ö†Ô∏è Resultado del Modelo: Coherencia Baja</h3>
      <div class="bg-gray-50 border rounded p-4 mb-4 shadow-sm text-sm text-gray-800 text-center">
        <span>Œ±: <code id="alphaRes"></code></span> |
        <span>Œ≤: <code id="betaRes"></code></span> |
        <span>k: <code id="kRes"></code></span> |
        <span>Coherencia: <code id="coherenceRes" class="text-red-600 font-semibold"></code></span> |
        <span>Tiempo: <code id="timeRes" class="text-gray-700"></code></span>
      </div>

      <div class="bg-red-50 border rounded p-4 shadow-sm grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h4 class="text-lg font-semibold mb-2 text-red-800">üîç T√≥picos Detectados</h4>
          <div id="topicList" class="space-y-2"></div>
        </div>
        <div class="text-sm text-gray-800">
          <h4 class="text-lg font-semibold mb-2">üß† Interpretaci√≥n</h4>
          <p id="interpretationText" class="leading-relaxed">El modelo intent√≥ agrupar las solicitudes en temas comunes, pero la baja coherencia indica que los t√≥picos no est√°n bien definidos.</p>
        </div>
      </div>
    </div>
  </div>

  <script>
    const alphaInput = document.getElementById("alpha");
    const betaInput = document.getElementById("beta");
    const topicsInput = document.getElementById("topics");

    const wordPool = [
      ["presupuesto", "finanzas", "recurso", "asignaci√≥n", "monto"],
      ["vi√°ticos", "comisi√≥n", "gastos", "viaje", "agenda"],
      ["plazas", "honorarios", "remuneraci√≥n", "contrato", "salario"],
      ["documento", "folio", "expediente", "respuesta", "acceso"],
      ["proveedor", "licitaci√≥n", "adjudicaci√≥n", "compra", "contrato"],
      ["denuncia", "corrupci√≥n", "sanci√≥n", "falta", "queja"],
      ["proyecto", "ejecuci√≥n", "avance", "meta", "evaluaci√≥n"],
      ["tabulador", "puesto", "estructura", "categor√≠a", "sueldo"],
      ["base de datos", "archivo", "pdf", "excel", "formato"],
      ["servicio", "salud", "educaci√≥n", "programa", "desempe√±o"]
    ];

    let attemptCounter = 0;

    alphaInput.addEventListener("input", () => {
      document.getElementById("alphaVal").innerText = parseFloat(alphaInput.value).toFixed(2);
    });
    betaInput.addEventListener("input", () => {
      document.getElementById("betaVal").innerText = parseFloat(betaInput.value).toFixed(2);
    });
    topicsInput.addEventListener("input", () => {
      document.getElementById("topicsVal").innerText = parseInt(topicsInput.value);
    });

    function runSimulation() {
      attemptCounter++;

      const newAlpha = (Math.random() * 0.4 + 0.1).toFixed(2);
      const newBeta = (Math.random() * 0.2 + 0.01).toFixed(2);
      const newK = Math.floor(Math.random() * 6 + 3);

      alphaInput.value = newAlpha;
      betaInput.value = newBeta;
      topicsInput.value = newK;
      document.getElementById("alphaVal").innerText = newAlpha;
      document.getElementById("betaVal").innerText = newBeta;
      document.getElementById("topicsVal").innerText = newK;

      const stepsContainer = document.getElementById("steps");
      stepsContainer.innerHTML = "";
      for (let i = 1; i <= 6; i++) {
        const val = (Math.random() * 0.2 + 0.12).toFixed(3);
        stepsContainer.innerHTML += `
          <div class="flex flex-col items-center">
            <div class="w-3 h-3 rounded-full bg-red-500"></div>
            <div class="text-[10px] mt-1 font-mono">${val}</div>
          </div>`;
      }

      let coherence;
      if (attemptCounter < 6) {
        coherence = (Math.random() * 0.2 + 0.1).toFixed(3);
      } else {
        coherence = Math.random() < 0.4 
          ? (Math.random() * 0.4 + 0.5).toFixed(3) 
          : (Math.random() * 0.2 + 0.1).toFixed(3);
      }

      const baseTime = 25;
      const topicFactor = newK * 3;
      const alphaPenalty = (1 / parseFloat(newAlpha)) * 5;
      const timeMinutes = (baseTime + topicFactor + alphaPenalty).toFixed(0);

      document.getElementById("alphaRes").innerText = newAlpha;
      document.getElementById("betaRes").innerText = newBeta;
      document.getElementById("kRes").innerText = newK;
      document.getElementById("coherenceRes").innerText = coherence;
      document.getElementById("timeRes").innerText = `‚âà ${timeMinutes} min`;

      const title = document.getElementById("coherenceTitle");
      const coherenceVal = document.getElementById("coherenceRes");
      const interpretation = document.getElementById("interpretationText");

      if (parseFloat(coherence) > 0.5) {
        title.innerText = "‚úÖ Resultado del Modelo: Coherencia Alta";
        title.classList.remove("text-red-700");
        title.classList.add("text-green-700");
        coherenceVal.classList.remove("text-red-600");
        coherenceVal.classList.add("text-green-700");
        interpretation.innerHTML = `El modelo logr√≥ agrupar de manera efectiva las solicitudes en t√≥picos bien definidos. Esta coherencia sugiere un preprocesamiento adecuado, una segmentaci√≥n clara del lenguaje y un n√∫mero apropiado de temas.`;
      } else {
        title.innerText = "‚ö†Ô∏è Resultado del Modelo: Coherencia Baja";
        title.classList.remove("text-green-700");
        title.classList.add("text-red-700");
        coherenceVal.classList.remove("text-green-700");
        coherenceVal.classList.add("text-red-600");
        interpretation.innerHTML = `El modelo intent√≥ agrupar las solicitudes en temas comunes, pero la baja coherencia indica que los t√≥picos no est√°n bien definidos.`;
      }

      const topicList = document.getElementById("topicList");
      topicList.innerHTML = "";
      const used = new Set();
      for (let i = 0; i < newK; i++) {
        let index;
        do {
          index = Math.floor(Math.random() * wordPool.length);
        } while (used.has(index));
        used.add(index);
        const selectedWords = wordPool[index].sort(() => 0.5 - Math.random()).slice(0, 4);
        const wordsWithProbs = selectedWords.map(w => `${w} (${(Math.random() * 0.1 + 0.02).toFixed(3)})`).join(", ");
        topicList.innerHTML += `<div><strong>T√≥pico ${i + 1}:</strong> <span class="text-red-800">${wordsWithProbs}</span></div>`;
      }

      document.getElementById("finalResult").classList.remove("hidden");
    }
  </script>
</body>
</html>