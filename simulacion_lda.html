

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulaci√≥n LDA - Acceso a la Informaci√≥n</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-gray-800 p-6">
  <div class="max-w-5xl mx-auto">
    <h1 class="text-2xl font-bold mb-4 text-center">üß† Simulaci√≥n de LDA sobre Solicitudes de Informaci√≥n P√∫blica</h1>

    <div class="bg-gray-50 border-l-4 border-blue-600 p-4 mb-6 shadow-sm">
      <p class="text-sm text-gray-700 italic mb-2">Ejemplos reales de solicitudes:</p>
      <ul class="list-disc pl-6 text-sm text-gray-800 space-y-1">
        <li>‚ÄúSolicito copia del contrato adjudicado a Consultores Ambientales S.A. de C.V. en 2022.‚Äù</li>
        <li>‚ÄúRequiero el monto total gastado en campa√±as de comunicaci√≥n institucional.‚Äù</li>
        <li>‚ÄúFavor de enviar el padr√≥n de beneficiarios del programa Apoyo Alimentario.‚Äù</li>
        <li>‚Äú¬øCu√°ntas denuncias por acoso laboral se han registrado en 2023?‚Äù</li>
        <li>‚ÄúSolicito base de datos de sanciones administrativas impuestas entre 2020 y 2024.‚Äù</li>
      </ul>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 items-end">
      <div>
        <label class="block text-sm font-semibold" title="Œ± controla la distribuci√≥n de temas por documento.">Œ± (Alpha)</label>
        <input id="alpha" type="range" min="0.1" max="1.0" step="0.01" value="0.3" class="w-full">
        <div id="alphaVal" class="text-center mt-1 text-sm">0.30</div>
      </div>
      <div>
        <label class="block text-sm font-semibold" title="Œ≤ controla la distribuci√≥n de palabras por tema.">Œ≤ (Beta)</label>
        <input id="beta" type="range" min="0.01" max="0.5" step="0.01" value="0.1" class="w-full">
        <div id="betaVal" class="text-center mt-1 text-sm">0.10</div>
      </div>
      <div>
        <label class="block text-sm font-semibold" title="N√∫mero de temas que el modelo intentar√° identificar.">k (T√≥picos)</label>
        <input id="topics" type="range" min="2" max="10" step="1" value="4" class="w-full">
        <div id="topicsVal" class="text-center mt-1 text-sm">4</div>
      </div>
      <div>
        <label class="block text-sm font-semibold">üìà Progreso (Coherencia)</label>
        <div id="steps" class="flex gap-2 justify-center mt-2 flex-wrap text-xs text-gray-600"></div>
      </div>
    </div>

    <div class="text-center mb-6">
      <button onclick="runSimulation()" class="bg-gradient-to-r from-red-600 to-pink-600 text-white font-bold px-6 py-2 rounded shadow hover:scale-105 transition">üîÑ Simular Modelo</button>
    </div>

    <div id="finalResult" class="hidden border-t pt-6 mt-6">
      <h3 class="text-xl font-semibold text-red-700 mb-4 text-center">‚ö†Ô∏è Resultado del Modelo: Coherencia Baja</h3>
      <div class="bg-gray-50 border rounded p-4 mb-4 shadow-sm text-sm text-gray-800 text-center">
        <span>Œ±: <code id="alphaRes"></code></span> |
        <span>Œ≤: <code id="betaRes"></code></span> |
        <span>k: <code id="kRes"></code></span> |
        <span>Coherencia: <code id="coherenceRes" class="text-red-600 font-semibold"></code></span> |
        <span>Tiempo: <code id="timeRes" class="text-gray-700"></code></span>
      </div>

      <div class="bg-red-50 border rounded p-4 shadow-sm">
        <h4 class="text-lg font-semibold mb-2 text-red-800">üîç T√≥picos Detectados</h4>
        <div id="topicList" class="space-y-2"></div>
        <p class="text-sm text-gray-600 mt-4 italic">* Estos temas tienen baja coherencia. Se recomienda mejorar el preprocesamiento o ajustar par√°metros.</p>
      </div>

      <p class="mt-4 text-sm text-gray-700 text-center">
        üß† <strong>Interpretaci√≥n:</strong> El modelo intent√≥ agrupar las solicitudes en temas comunes, pero la baja coherencia indica que los t√≥picos no est√°n bien definidos.
      </p>
    </div>
  </div>

  <script>
    const alphaInput = document.getElementById("alpha");
    const betaInput = document.getElementById("beta");
    const topicsInput = document.getElementById("topics");

    const wordPool = [
      ["presupuesto", "finanzas", "recurso", "asignaci√≥n", "monto"],
      ["vi√°ticos", "comisi√≥n", "gastos", "viaje", "agenda"],
      ["plazas", "honorarios", "remuneraci√≥n", "contrato", "salario"],
      ["documento", "folio", "expediente", "respuesta", "acceso"],
      ["proveedor", "licitaci√≥n", "adjudicaci√≥n", "compra", "contrato"],
      ["denuncia", "corrupci√≥n", "sanci√≥n", "falta", "queja"],
      ["proyecto", "ejecuci√≥n", "avance", "meta", "evaluaci√≥n"],
      ["tabulador", "puesto", "estructura", "categor√≠a", "sueldo"],
      ["base de datos", "archivo", "pdf", "excel", "formato"],
      ["servicio", "salud", "educaci√≥n", "programa", "desempe√±o"]
    ];

    alphaInput.addEventListener("input", () => {
      document.getElementById("alphaVal").innerText = parseFloat(alphaInput.value).toFixed(2);
    });
    betaInput.addEventListener("input", () => {
      document.getElementById("betaVal").innerText = parseFloat(betaInput.value).toFixed(2);
    });
    topicsInput.addEventListener("input", () => {
      document.getElementById("topicsVal").innerText = parseInt(topicsInput.value);
    });

    function runSimulation() {
      const newAlpha = (Math.random() * 0.4 + 0.1).toFixed(2);
      const newBeta = (Math.random() * 0.2 + 0.01).toFixed(2);
      const newK = Math.floor(Math.random() * 6 + 3);

      alphaInput.value = newAlpha;
      betaInput.value = newBeta;
      topicsInput.value = newK;
      document.getElementById("alphaVal").innerText = newAlpha;
      document.getElementById("betaVal").innerText = newBeta;
      document.getElementById("topicsVal").innerText = newK;

      const stepsContainer = document.getElementById("steps");
      stepsContainer.innerHTML = "";
      for (let i = 1; i <= 6; i++) {
        const val = (Math.random() * 0.2 + 0.12).toFixed(3);
        stepsContainer.innerHTML += `
          <div class="flex flex-col items-center">
            <div class="w-3 h-3 rounded-full bg-red-500"></div>
            <div class="text-[10px] mt-1">${val}</div>
          </div>`;
      }

      const coherence = (Math.random() * 0.3 + 0.12).toFixed(3);
      const baseTime = 25;
      const topicFactor = newK * 3;
      const alphaPenalty = (1 / parseFloat(newAlpha)) * 5;
      const timeMinutes = (baseTime + topicFactor + alphaPenalty).toFixed(0);

      document.getElementById("alphaRes").innerText = newAlpha;
      document.getElementById("betaRes").innerText = newBeta;
      document.getElementById("kRes").innerText = newK;
      document.getElementById("coherenceRes").innerText = coherence;
      document.getElementById("timeRes").innerText = `‚âà ${timeMinutes} min`;

      const topicList = document.getElementById("topicList");
      topicList.innerHTML = "";
      const used = new Set();
      for (let i = 0; i < newK; i++) {
        let index;
        do {
          index = Math.floor(Math.random() * wordPool.length);
        } while (used.has(index));
        used.add(index);
        const selectedWords = wordPool[index].sort(() => 0.5 - Math.random()).slice(0, 4);
        const wordsWithProbs = selectedWords.map(w => `${w} (${(Math.random() * 0.1 + 0.02).toFixed(3)})`).join(", ");
        topicList.innerHTML += `<div><strong>T√≥pico ${i + 1}:</strong> <span class="text-red-800">${wordsWithProbs}</span></div>`;
      }

      document.getElementById("finalResult").classList.remove("hidden");
    }
  </script>
</body>
</html>
